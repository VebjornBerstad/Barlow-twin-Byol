schema: '2.0'
stages:
  fetch_audioset:
    cmd: ' python -m swarm.fetch_audioset --kaggle_dataset zfturbo/audioset --temp_dir
      ./temp/ --data_dir ./datasets/ '
    deps:
    - path: src/swarm/fetch_audioset.py
      md5: 573b5d7c464e90c1cfee579fc092ecdc
      size: 1170
  fetch_gtzan:
    cmd: ' rm -rf ./temp/gtzan/ ./datasets/gtzan_train_mel_split/ ./datasets/gtzan_val_mel_split/
      && python -m swarm.download.kaggle --kaggle_dataset andradaolteanu/gtzan-dataset-music-genre-classification
      --temp_dir ./temp/gtzan/ --output_dir ./temp/gtzan_wavs/ --unzip True && python
      -m swarm.preprocess.gtzan --input_dir ./temp/gtzan_wavs/ --output_dir_train
      ./datasets/gtzan_train_mel_split/ --output_dir_val ./datasets/gtzan_val_mel_split/
      && rm -rf ./temp/gtzan/ '
    deps:
    - path: src/swarm/config.py
      md5: 5fd227ce8e8d58c05f33bfa20fbd83db
      size: 551
    - path: src/swarm/download/kaggle.py
      md5: 90770559818f46d2f15eca8885cd0d79
      size: 2013
    - path: src/swarm/preprocess/gtzan.py
      md5: ce65156b71dba0f2e6bc1a88771b6f88
      size: 4512
    - path: src/swarm/preprocess/tools.py
      md5: 181fa4938c30358da3c641f40e7ddcc0
      size: 2317
    outs:
    - path: ./datasets/gtzan_train_mel_split/
      md5: 5c608cec91d2300945994ad02d801c36.dir
      size: 613768992
      nfiles: 2388
    - path: ./datasets/gtzan_val_mel_split/
      md5: 65874b0c6f2180c123e5c195df83280c.dir
      size: 154213320
      nfiles: 600
  fetch_audioset_train:
    cmd: ' rm -rf ./datasets/audioset_train_mel_split/ ./datasets/audioset_metadata/
      && python -m swarm.download.kaggle --kaggle_dataset zfturbo/audioset --temp_dir
      ./temp/audioset_train/ --unzip False && python -m swarm.preprocess.audioset
      --input_zip ./temp/audioset_train/audioset.zip --output_dir_lms ./datasets/audioset_train_mel_split/
      --output_dir_metadata ./datasets/audioset_metadata/ --temp_dir ./temp/audioset_train/ '
    deps:
    - path: src/swarm/config.py
      md5: 5fd227ce8e8d58c05f33bfa20fbd83db
      size: 551
    - path: src/swarm/download/kaggle.py
      md5: 90770559818f46d2f15eca8885cd0d79
      size: 2013
    - path: src/swarm/preprocess/audioset.py
      md5: 563e2b3f62fdbc4f64e679ed19d20b88
      size: 3442
    - path: src/swarm/preprocess/tools.py
      md5: 181fa4938c30358da3c641f40e7ddcc0
      size: 2317
    outs:
    - path: ./datasets/audioset_metadata/class_labels_indices.csv
      md5: 68c0b5c199d6cc789852b144cc3ab500
      size: 14675
    - path: ./datasets/audioset_metadata/train.csv
      md5: ededd922be3267a2ef83457d5f252e95
      size: 948332
    - path: ./datasets/audioset_train_mel_split/
      md5: 63a51864fe2e9101a5d735dc0a67fb88.dir
      size: 5001004406
      nfiles: 19642
